<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>/topics/17-security [missing course]</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      word-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
  pre code {
      background-color: lightgoldenrodyellow;
      border-radius: 1.0rem;
      display: block;
      font-size: 0.8rem;
      padding: 1.0rem;
  }

  pre code.sourceCode {
      background-color: lightgoldenrodyellow;
  }

  code {
      background-color: lightgoldenrodyellow;
      border-radius: 0.3rem;
      padding: 0.1rem 0.2rem;
  }

  figcaption {
      font-size: 0.9rem;
      font-style: italic;
      text-align: center;
  }

  #before {
      display: flex;
      justify-content: space-between;
      border-bottom: 1px solid black;
  }

  #after {
      display: flex;
      justify-content: space-between;
      border-top: 1px solid black;
  }
  </style>
</head>
<body>
<div id="banner">
    <img src="media/header.jpg" alt="Course Header">
</div>
<div id="before">
    The Missing Course
    <div id="before-links">
        <a href="../.." title="Course Home">Home</a> |
        <a href="https://github.com/glesica/missing-course" title="Course GitHub Page">GitHub</a>
    </div>
</div>
<h1 id="security">Security</h1>
<p>Security is a broad field, so we will cover a smattering of topics that are likely to be useful to at least many of you.</p>
<h1 id="passwords">Passwords</h1>
<p>The most obvious way to handle passwords in an application is to simply store them somewhere (in a database, perhaps) and when a user attempts to log in, look up the password that corresponds to the user and verify that it matches.</p>
<p>This actually works just fine, but it has some very unfortunate consequences in the event that the database where the passwords are stored is compromised since the attackers get immediate access to all user credentials. Now, you might think that this isn’t a big deal since, if the database has been compromised, the attackers already have access to every user’s data anyway, but, unfortunately, people tend to re-use passwords across applications. This means that a password stolen from an inconsequential application might give the attackers access to a user’s email or bank account.</p>
<p>To mitigate this issue, we hash passwords before they are stored. This means that we apply a one-way function to transform the password into a different value that can’t be easily converted back into the original password. To do this, we use a “hash function”. This is a function <code>h(x) -&gt; y</code> with the property that there exists no (reasonable) function <code>h'(y) -&gt; x</code>.</p>
<p>One such hash function is called SHA-256. This is the one we will use in our examples.</p>
<p>Hashing passwords before storing them goes a long way to fixing the problem described above, but attackers can still reverse a hash function, at least probabilistically, using a tool commonly called a Rainbow Table. This is, essentially, a table of pre-hashed passwords either randomly generated or known to be in common use. Once such a table has been computed, it is trivial (and very fast) to convert a hash back into the original password (assuming the hash exists in the table).</p>
<p>The prevent this, we apply what is known as a “salt” to each password before it is hashed. Essentially, we take the user’s password, add some random data to it to make it stronger, hash the salted password, and then store the hashed password along with the salt value in our database. See the pseudo-Python below.</p>
<pre><code>def hash_password(pw):
    salt = random_salt()
    salted_pw = pw + salt
    hashed_pw = sha256(salted_pw)
    return (hashed_pw, salt)</code></pre>
<p>Now, let’s assume that we use a single, randomly chosen, lower-case letter as the salt value. This means that an effective rainbow table must hash each password 26 times, once with each possible salt value. This is quite a bit more work, and makes the table take up quite a bit more space on disk. If we make our salt values four characters long and allow all alphanumeric characters then a rainbow table with a given level of effectiveness will be <span class="math inline">62<sup>4</sup> = 14, 776, 336</span> times as large. That’s already entirely impractical for a table that contains more than just a few potential passwords.</p>
<h2 id="example">Example</h2>
<p>Take a look the scripts below and play around with hashing various passwords, generating rainbow tables, and looking up passwords in those tables.</p>
<ul>
<li><a href="hash_password.py">hash_password.py</a></li>
<li><a href="rainbow_table.py">rainbow_table.py</a></li>
<li><a href="table_lookup.py">table_lookup.py</a></li>
</ul>
<h1 id="sql-injection">SQL Injection</h1>
<h1 id="buffer-overruns">Buffer Overruns</h1>

<div id="after">
    <a href="#">Back to top</a>
    <div id="after-links">
        <a href="../.." title="Course Home">Home</a> |
        <a href="https://github.com/glesica/missing-course" title="Course GitHub Page">GitHub</a>
    </div>
</div>
</body>
</html>
